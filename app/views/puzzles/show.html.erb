<div class="flex flex-col items-center mt-6">
  <h1 class="text-2xl font-bold mb-2"><%= @puzzle.title %></h1>
  <p>状態: <%= @puzzle.status %></p>
  <p>完成日: <%= @puzzle.completed_at || "未完成" %></p>
  <p>進捗: <%= @puzzle.puzzle_pieces.where(filled: true).count %> / <%= @puzzle.puzzle_pieces.count %> ピース埋まり</p>
</div>

<!-- ピース表示エリア -->
<div class="flex justify-center items-center mt-6">
  <div class="grid grid-cols-3 gap-2">
    <% pieces = @puzzle.puzzle_pieces.to_a %>
    <% (pieces.size...9).each { pieces << nil } %>

    <% pieces.each do |piece| %>
      <% if piece.nil? %>
        <!-- 空きマス -->
        <div class="w-24 aspect-square border-2 border-dashed border-gray-200 rounded-lg bg-gray-50"></div>
      <% elsif piece.filled %>
        <!-- 埋まったピース -->
        <div class="w-24 aspect-square border rounded-lg flex items-center justify-center text-2xl font-bold
                    bg-blue-500 text-white shadow-md transition-all duration-500">
          ✅
        </div>
      <% else %>
        <!-- 未埋めピース -->
        <div class="w-24 aspect-square border-2 border-dashed border-gray-400 rounded-lg flex items-center justify-center text-2xl
                    text-gray-500 bg-gray-50">
          🔒
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<!-- app/views/puzzles/show.html.erb -->
<%= render "modal" %>

<% if @puzzle.completed? %>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("completeModal").showModal();
    });
  </script>
<% end %>



